<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Our Elite Team - RibbitVPN</title>
    <style>
      body {
        background-color: #1a3a27;
        color: #f0f0f0;
        font-family: "Arial", sans-serif;
        margin: 0;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      h1 {
        color: #28a745;
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 30px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      }

      .contributors-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .contributor-card {
        background: rgba(0, 0, 0, 0.6);
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        border: 1px solid #28a745;
        transition: transform 0.3s ease;
      }

      .contributor-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
      }

      .contributor-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #28a745;
        margin-bottom: 10px;
      }

      .contributor-name {
        font-weight: bold;
        margin: 10px 0;
        color: #28a745;
      }

      .contributor-stats {
        display: flex;
        justify-content: space-around;
        margin-top: 15px;
      }

      .stat {
        text-align: center;
      }

      .stat-value {
        font-weight: bold;
        color: #a3e4a3;
      }

      .stat-label {
        font-size: 0.8em;
        opacity: 0.8;
      }

      .repo-stats {
        background: rgba(0, 0, 0, 0.6);
        border-radius: 10px;
        padding: 20px;
        margin-top: 40px;
        border: 1px solid #28a745;
      }

      .stat-bars {
        margin-top: 20px;
      }

      .stat-bar {
        margin-bottom: 15px;
      }

      .stat-bar-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
      }

      .bar-container {
        height: 10px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: linear-gradient(to right, #28a745, #1e7e34);
        border-radius: 5px;
      }

      .loading {
        text-align: center;
        padding: 50px;
        font-style: italic;
        color: #a3e4a3;
      }

      .frog {
        position: fixed;
        bottom: 20px;
        right: 20px;
        font-size: 3em;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üê∏ Our Elite Sigma Contributors üê∏</h1>

      <div id="contributors-container" class="contributors-grid">
        <div class="loading">Harvesting contributor data from GitHub...</div>
      </div>

      <div class="repo-stats">
        <h2>üìä Super Important Repo Stats</h2>
        <div id="stats-container">
          <div class="loading">Calculating fake statistics...</div>
        </div>
      </div>
    </div>

    <div class="frog" onclick="ribbit()">üê∏</div>

    <script>
      // GitHub API setup
      const REPO_OWNER = "RibbitVPN";
      const REPO_NAME = "ribbitvpn.github.io";
      const API_URL = `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}`;

      // Ribbit sound for maximum professionalism
      function ribbit() {
        const audio = new Audio(
          "https://assets.mixkit.co/sfx/preview/mixkit-frog-croaking-1719.mp3"
        );
        audio.play();
      }

      // Fetch contributors from GitHub API
      async function fetchContributors() {
        try {
          const response = await fetch(`${API_URL}/contributors`);
          const contributors = await response.json();

          // Filter out bots (optional)
          const humanContributors = contributors.filter(
            (contrib) =>
              !contrib.login.includes("bot") &&
              !contrib.login.includes("dependabot")
          );

          displayContributors(humanContributors);
        } catch (error) {
          console.error("Error fetching contributors:", error);
          document.getElementById("contributors-container").innerHTML = `
                    <div class="contributor-card">
                        <p>Failed to load contributors. Probably the CIA's fault.</p>
                        <p>Refresh or try again later (we won't).</p>
                    </div>
                `;
        }
      }

      // Display contributors in the grid
      function displayContributors(contributors) {
        const container = document.getElementById("contributors-container");

        if (contributors.length === 0) {
          container.innerHTML = `
                    <div class="contributor-card">
                        <p>No contributors found. Just like our privacy policy.</p>
                    </div>
                `;
          return;
        }

        container.innerHTML = contributors
          .map(
            (contributor) => `
                <div class="contributor-card">
                    <img src="${contributor.avatar_url}" alt="${contributor.login}" class="contributor-avatar">
                    <div class="contributor-name">${contributor.login}</div>
                    <div class="contributor-stats">
                        <div class="stat">
                            <div class="stat-value">${contributor.contributions}</div>
                            <div class="stat-label">Commits</div>
                        </div>
                        <div class="stat">
                            <a href="${contributor.html_url}" target="_blank" style="color:#28a745;">Profile</a>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      // Fetch repo statistics
      async function fetchRepoStats() {
        try {
          const [contributors, commits] = await Promise.all([
            fetch(`${API_URL}/contributors`).then((res) => res.json()),
            fetch(`${API_URL}/commits?per_page=1`).then((res) => {
              const link = res.headers.get("link");
              if (!link) return 0;
              const lastPage = link.match(/page=(\d+)>; rel="last"/);
              return lastPage ? parseInt(lastPage[1]) : 0;
            }),
          ]);

          // Get languages used in the repo
          const languagesRes = await fetch(`${API_URL}/languages`);
          const languages = await languagesRes.json();

          displayRepoStats({
            contributorCount: contributors.length,
            commitCount: commits,
            languages: languages,
          });
        } catch (error) {
          console.error("Error fetching repo stats:", error);
          document.getElementById("stats-container").innerHTML = `
                    <p>Statistics unavailable. Our VPN must be working too well.</p>
                `;
        }
      }

      // Display repository statistics
      function displayRepoStats(stats) {
        const container = document.getElementById("stats-container");

        // Calculate language percentages
        const totalBytes = Object.values(stats.languages).reduce(
          (sum, bytes) => sum + bytes,
          0
        );
        const languages = Object.entries(stats.languages)
          .sort((a, b) => b[1] - a[1])
          .slice(0, 5) // Show top 5 languages
          .map(([lang, bytes]) => ({
            name: lang,
            percent: Math.round((bytes / totalBytes) * 100),
          }));

        container.innerHTML = `
                <div class="stat-bars">
                    <div class="stat-bar">
                        <div class="stat-bar-label">
                            <span>Contributors</span>
                            <span class="stat-value">${
                              stats.contributorCount
                            }</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${Math.min(
                              stats.contributorCount * 10,
                              100
                            )}%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-bar">
                        <div class="stat-bar-label">
                            <span>Total Commits</span>
                            <span class="stat-value">${stats.commitCount}</span>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${Math.min(
                              stats.commitCount / 10,
                              100
                            )}%"></div>
                        </div>
                    </div>
                    
                    <h3>Top Languages</h3>
                    ${languages
                      .map(
                        (lang) => `
                        <div class="stat-bar">
                            <div class="stat-bar-label">
                                <span>${lang.name}</span>
                                <span class="stat-value">${lang.percent}%</span>
                            </div>
                            <div class="bar-container">
                                <div class="bar" style="width: ${lang.percent}%"></div>
                            </div>
                        </div>
                    `
                      )
                      .join("")}
                </div>
                
                <p style="margin-top: 20px; font-style: italic; text-align: center;">
                    These stats update automatically (when we remember to push code)
                </p>
            `;
      }

      // Initialize everything
      document.addEventListener("DOMContentLoaded", () => {
        fetchContributors();
        fetchRepoStats();
      });
    </script>
  </body>
</html>
